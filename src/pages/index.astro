---
import Layout from "@layouts/Layout.astro";
import { Image } from "astro:assets";
import { getLastEpisodes } from "@lib/Anime.js";

const { episodes } = await getLastEpisodes();
---

<Layout title="Home">
	<section
		class="mx-auto max-w-1xl px-4 py-16 sm:px-6 sm:py-24 lg:max-w-7xl lg:px-8"
	>
		<h2 class="text-2xl mb-6 text-center">Nuevos Episodios</h2>
		<div
			class="grid grid-cols-3 gap-x-6 gap-y-4 sm:grid-cols-5 lg:grid-cols-6 xl:grid-cols-6 xl:gap-x-8"
		>
			{
				episodes.map((anime) => (
					<a
						href={`/anime/${anime.id}`}
						class="group shadow bg-gray-950 borde rounded-lg"
					>
						<div class="aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg  xl:aspect-h-8 xl:aspect-w-7">
							<Image
								src={`data:image/png;base64,${anime.image}`}
								alt={anime.title}
								width={184}
								height={50}
								class="w-max object-cover object-center group-hover:opacity-75"
							/>
						</div>
						<h3 class="ml-1 text-sm overflow-hidden truncate text-center">
							{anime.title}
						</h3>
						<p class=" text-lg font-medium text-center">{anime.episode}</p>
					</a>
				))
			}
		</div>
	</section>
</Layout>
